{
  "$schema": "https://storage.googleapis.com/anthropic-json-schemas/claude-code/config-schema.json",
  "name": "Paper Trail",
  "version": "1.0.0",
  "description": "A desktop application for managing timesheets, invoices, and financial transactions with Stripe integration. Built with React, TypeScript, Tauri, and SQLite.",
  "context": {
    "project_overview": "Paper Trail is a Tauri-based desktop app that helps users track time, manage projects, generate invoices through Stripe, and record financial transactions. It combines a React frontend with a Rust backend and uses SQLite for local data storage.",
    "tech_stack": {
      "frontend": ["React 19", "TypeScript 5", "Vite 7", "TailwindCSS 4", "React Query", "Zustand", "React Table"],
      "backend": ["Tauri 2.9", "Rust (Edition 2024)", "SQLite"],
      "apis": ["Stripe SDK"],
      "tools": ["Biome", "Vitest"]
    },
    "key_directories": {
      "src/app/": "Main React application code",
      "src/app/components/": "Reusable React UI components",
      "src/app/lib/": "Utilities, state management, Stripe API, and database abstraction",
      "src/app/lib/db/": "Database operations for projects, timesheets, transactions",
      "src-tauri/": "Rust backend code and Tauri configuration",
      "src-tauri/db/": "SQLite schema and migrations"
    }
  },
  "conventions": {
    "code_style": {
      "formatter": "Biome",
      "indentation": "tabs",
      "quotes": "double",
      "typescript": "strict mode enabled"
    },
    "component_patterns": [
      "Use functional components with TypeScript",
      "Props should be typed with interfaces",
      "Use React Query for server state (database operations)",
      "Use Zustand store for UI state (modals, tabs, selections)",
      "Co-locate test files with components (*.test.tsx)",
      "Use Lucide icons for UI elements"
    ],
    "database_patterns": [
      "All database operations go through src/app/lib/db/ abstraction layer",
      "Use Tauri SQL plugin for SQLite access",
      "Store money values in cents (integers) to avoid floating-point errors",
      "Dates use ISO format (YYYY-MM-DD)",
      "Foreign keys use CASCADE DELETE where appropriate"
    ],
    "state_management": [
      "Zustand store persists to localStorage for session state",
      "React Query manages database/server state with caching",
      "Stronghold stores sensitive credentials (Stripe API keys)"
    ],
    "styling": [
      "Use TailwindCSS utility classes",
      "Component styles defined inline with className",
      "Custom utilities in src/app/lib/utils.ts (cn() for class merging)"
    ]
  },
  "custom_instructions": [
    "When modifying database operations, ensure changes are reflected in both the TypeScript abstraction layer (src/app/lib/db/) and the SQL schema (src-tauri/db/seed.sql)",
    "For Stripe integration changes, update src/app/lib/stripeApi.ts and ensure API keys are stored securely via Stronghold",
    "When adding new components, follow the existing pattern: create in src/app/components/, add TypeScript types, and write Vitest tests",
    "Use React Query's invalidateQueries to refresh data after mutations (creates, updates, deletes)",
    "Path aliases are configured: use @/components, @/lib, and @ for imports from src/app/",
    "Run 'npm run check' before committing to ensure TypeScript and Biome checks pass",
    "When working with dates, use date-fns utilities from src/app/lib/utils.ts",
    "File attachments for transactions should be sanitized and stored via Tauri's file system plugin",
    "Tauri commands are invoked from React using @tauri-apps/api/core invoke()",
    "The app uses a light/dark theme toggle - ensure new components respect theme classes"
  ],
  "build_commands": {
    "dev": "npm run dev",
    "build": "npm run build",
    "test": "npm test",
    "lint": "npm run check",
    "tauri_dev": "npm run tauri dev",
    "tauri_build": "npm run tauri build"
  },
  "testing": {
    "framework": "Vitest",
    "patterns": [
      "Test files use *.test.ts or *.test.tsx extension",
      "Co-locate tests with source files",
      "Test database operations with mock data",
      "Test component rendering and user interactions"
    ]
  },
  "security_considerations": [
    "Stripe API keys MUST be stored in Stronghold, never in plain text or localStorage",
    "Validate all user inputs before database operations",
    "Use parameterized queries to prevent SQL injection",
    "Sanitize file names and paths for transaction attachments",
    "Argon2 is available for password hashing if needed"
  ],
  "common_tasks": {
    "add_new_page": [
      "1. Create new component in src/app/",
      "2. Add route to src/app/index.tsx",
      "3. Add navigation link if needed",
      "4. Create database operations if needed in src/app/lib/db/",
      "5. Set up React Query hooks for data fetching"
    ],
    "add_database_table": [
      "1. Add table definition to src-tauri/db/seed.sql",
      "2. Create TypeScript types in src/app/lib/db/types.ts",
      "3. Create CRUD functions in src/app/lib/db/[table-name].ts",
      "4. Set up React Query hooks in components",
      "5. Test database operations"
    ],
    "add_stripe_feature": [
      "1. Update src/app/lib/stripeApi.ts with new Stripe SDK calls",
      "2. Ensure proper error handling",
      "3. Add UI components for the feature",
      "4. Test with Stripe test keys first"
    ],
    "add_tauri_command": [
      "1. Define Rust function in src-tauri/src/lib.rs",
      "2. Add to Tauri app builder",
      "3. Invoke from React with @tauri-apps/api/core",
      "4. Handle async operations properly"
    ]
  },
  "files_to_understand": {
    "src/app/lib/store.ts": "Zustand state management - UI state and localStorage persistence",
    "src/app/lib/db/client.ts": "SQLite connection manager and database initialization",
    "src/app/lib/stripeApi.ts": "Stripe API integration functions",
    "src/app/lib/stronghold.ts": "Secure credential storage wrapper",
    "src/app/lib/types.ts": "Core TypeScript type definitions",
    "src-tauri/db/seed.sql": "Database schema and migration logic",
    "src-tauri/src/lib.rs": "Tauri application setup and Rust commands",
    "src/app/index.tsx": "Main app router and page layout",
    "vite.config.ts": "Vite configuration with path aliases and Tauri integration"
  },
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@context7/mcp-server"]
    }
  }
}
